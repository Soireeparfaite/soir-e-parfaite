<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Planificateur d'activit√©s avec timeline</title>
<style>
   body {
    font-family: 'Segoe UI', Roboto, sans-serif;
    margin: 0;
    padding: 2rem;
    background: rgb(239,231,220);
    color: #1e1e2f;
    line-height: 1.6;
    padding: 0;
  overflow-x: hidden;
  }


nav {

  top: 0;
  left: 0;

  z-index: 999;
  background: rgb(239,231,220);
  color: rgb(0,72,174);
  display: flex;
  justify-content: space-between;
  padding: 16px 30px;
  align-items: center;
}


nav .logo {
  font-weight: bold;
  font-size: 2rem;
  color: #b30808;
}

nav ul {
  display: flex;
  list-style: none;
  gap: 24px;
  margin: 0;
  padding: 0;
  align-items: center;
}

nav ul li a {
  text-decoration: none;
  color: #b30808;
  font-weight: bold;
  font-size: 1.2rem;
}

  h1 {
    text-align: center;
    color: #b30808;
    font-size: 2.2rem;
    margin-bottom: 2rem;
  }

  form {
    max-width: 760px;
    margin: auto;
    padding: 2rem;
    background: #ffffff;
    border-radius: 20px;
    box-shadow: 8px 8px 16px rgba(0,0,0,0.05), -8px -8px 16px rgba(255,255,255,0.8);
    display: flex;
    flex-wrap: wrap;
    gap: 1.5rem;
    justify-content: space-between;
  }

  label {
    display: flex;
    flex-direction: column;
    font-weight: 600;
    color: #333;
    flex: 1 1 200px;
  }

  select, input[type=number] {
    margin-top: 0.5rem;
    padding: 0.6rem 0.8rem;
    font-size: 1rem;
    border: none;
    border-radius: 10px;
    background: #f0f4f8;
    box-shadow: inset 2px 2px 6px rgba(0,0,0,0.05), inset -2px -2px 6px rgba(255,255,255,0.6);
    transition: all 0.2s ease-in-out;
  }

  select:focus, input[type=number]:focus {
    outline: none;
    background: #e4ecf4;
  }

  button {
    padding: 0.7rem 1.6rem;
    font-weight: bold;
    font-size: 1rem;
    background: #b30808;
    color: white;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    transition: transform 0.2s ease, background 0.3s ease;
  }

  button:hover {
    transform: translateY(-2px);
    background: linear-gradient(to right, #005a9e, #004f8c);
  }

  #timeline-container {
    margin: 3rem auto;
    max-width: 950px;
    background: #ffffff;
    border-radius: 20px;
    padding: 2rem;
    box-shadow: 8px 8px 16px rgba(0,0,0,0.05), -8px -8px 16px rgba(255,255,255,0.8);
    overflow-x: auto;
  }

  #timeline {
    position: relative;
    height: 100px;
    border-top: 4px solid #b30808;
    border-bottom: 4px solid #b30808;
    display: flex;
    gap: 1px;
  }

  .hour-block {
    flex: 1;
    text-align: center;
    font-weight: 600;
    font-size: 0.9rem;
    color: #444;
    border-left: 1px solid #ccc;
    position: relative;
    padding-top: 0.5rem;
  }

  .hour-block:first-child {
    border-left: none;
  }

  .activity {
    position: absolute;
    top: 12px;
    background: #0078d4;
    color: white;
    padding: 6px 12px;
    border-radius: 12px;
    font-weight: 600;
    font-size: 0.85rem;
    white-space: nowrap;
    box-shadow: 0 6px 12px rgba(0, 120, 212, 0.4);
    transition: transform 0.2s ease;
  }

  .activity:hover {
    transform: scale(1.05);
  }

  .activity.mealIncluded {
    background: #28a745;
  }

  #resultats {
    max-width: 760px;
    margin: 2rem auto;
    background: white;
    padding: 2rem;
    border-radius: 20px;
    box-shadow: 8px 8px 16px rgba(0,0,0,0.05), -8px -8px 16px rgba(255,255,255,0.8);
  }
</style>
</head>
<body>
<nav>
    <div class="logo">OSMOZ</div>
    <ul>
      <li><a href="fonctionnement.html">Fonctionnement</a></li>
      <li><a href="cout.html">Combien √ßa co√ªte ?</a></li>

      <li><a href="generateur.html">G√©n√©rer un menu</a></li>

      <!-- Lien de connexion / inscription (visible par d√©faut) -->
      <li id="nav-auth"><a href="inscription.html">Se connecter / Inscription</a></li>

      <!-- Lien Mon compte (cach√© par d√©faut) -->
      <li id="nav-user" class="hidden"><a href="moncompte.html" style="color: #b30808 ; font-weight: bold;">üë§ Mon compte</a></li>
    </ul>
  </nav>
<h1>Planificateur d'activit√©s avec timeline</h1>

<form id="formFiltres">
  <label>
    Date de la journ√©e :
    <input type="date" id="inputDate" required />
  </label>

  <label>
    Ambiance secondaire :
    <select id="selectAmbiance">
      <option value="">-- Toutes --</option>
      <option value="sportif">Sportif</option>
      <option value="gastronomique">Gastronomique</option>
      <option value="chill">Chill</option>
      <option value="romantique">Romantique</option>
      <option value="insolite">Insolite</option>
    </select>
  </label>

  <label>
    Repas inclus obligatoire ?
    <select id="selectRepas">
      <option value="non">Non</option>
      <option value="oui">Oui</option>
    </select>
  </label>

  <label>
    Budget max total (‚Ç¨) :
    <input type="number" id="inputBudget" value="100" min="0" />
  </label>

  <label>
    Heure d√©but (24h) :
    <input type="number" id="inputHeureDebut" value="8" min="0" max="23" />
  </label>

  <label>
    Heure fin (24h) :
    <input type="number" id="inputHeureFin" value="20" min="1" max="24" />
  </label>

  <button type="submit">Planifier</button>
</form>
<section id="experience-osmoz" style="margin-bottom:20px; font-weight:bold; font-size:1.2em;">
  Votre exp√©rience Osmoz du <span id="date-experience"></span>
</section>
<div id="timeline-container" style="position:relative; width: 900px; border: 1px solid #ccc; height: 100px; margin-top: 20px;">
  <div id="timeline" style="position:relative; height: 100%;"></div>
</div>

<div id="resultats"></div>

<script>
  // Activit√©s (inchang√©)
  const activites = [
        {
    id: "visite_parc_du_chateau_cimiez",
    title: "Visite du Parc du Ch√¢teau de Cimiez",
    phone: "+33 4 93 54 30 60",
    reservationLink: "https://musee-massena.nicetourisme.com",
    address: "65 Promenade des Anglais, 06000 Nice",
    description: "Promenade dans les jardins du palace Mass√©na et ruines romaines.",
    mealIncluded: false,
    duration: 1.5,
    primaryCategory: "matin",
    secondaryCategory: "chill",
    budget: 8
  },
  {
    id: "atelier_patisserie_nice",
    title: "Atelier p√¢tisserie ni√ßoise",
    phone: "+33 4 93 55 11 22",
    reservationLink: "https://www.passerelle-gourmande.fr",
    address: "8 Rue du Ch√¢teau, 06300 Nice",
    description: "Apprenez √† pr√©parer tourtes de blettes et socca sucr√©e.",
    mealIncluded: true,
    duration: 2,
    primaryCategory: "apr√®s-midi",
    secondaryCategory: "gastronomique",
    budget: 45
  },
  {
    id: "balade_vtt_colline",
    title: "Balade VTT sur la Colline Puget",
    phone: "+33 6 07 08 09 10",
    reservationLink: "https://www.velonice.fr",
    address: "Acc√®s Colline Puget, 06000 Nice",
    description: "Parcours VTT technique avec vues sur la ville et la mer.",
    mealIncluded: false,
    duration: 2,
    primaryCategory: "matin",
    secondaryCategory: "sportif",
    budget: 20
  },
  {
    id: "decouverte_parfum_grasse",
    title: "D√©couverte du parfum √† Grasse",
    phone: "+33 4 97 05 00 02",
    reservationLink: "https://www.fragonard.com",
    address: "7 Boulevard Fragonard, 06130 Grasse",
    description: "Visite d‚Äôune parfumerie historique et cr√©ation de votre parfum.",
    mealIncluded: false,
    duration: 3,
    primaryCategory: "apr√®s-midi",
    secondaryCategory: "insolite",
    budget: 60
  },
    {
    id: excursion_grotte_mas_grenier,
    title: "Excursion dans la Grotte de Mas Grenier",
    phone: "+33 4 93 80 75 02",
    reservationLink: "https://www.grotte-mas-grenier.com",
    address: "D559, 06230 Villefranche-sur-Mer",
    description: "Visite guid√©e de cette grotte pr√©serv√©e avec formations stalactites.",
    mealIncluded: false,
    duration: 1.5,
    primaryCategory: "matin",
    secondaryCategory: "insolite",
    budget: 12
  },
  {
    id: petite_randonnee_couleuvre,
    title: "Petite randonn√©e de la Couleuvre",
    phone: "+33 6 07 03 09 39",
    reservationLink: "https://randonnees-mercantour.fr",
    address: "Lac de Saint-Cassien, 83540 Mons",
    description: "Boucle facile autour du lac, accessible √† toute la famille.",
    mealIncluded: false,
    duration: 2,
    primaryCategory: "apr√®s-midi",
    secondaryCategory: "sportif",
    budget: 0
  },
  {
    id: stand_up_paddle_voie_verte,
    title: "Stand up paddle sur la Voie Verte",
    phone: "+33 6 12 34 56 78",
    reservationLink: "https://www.paddle-nice.com",
    address: "Port de Nice, Quai Lunel, 06300 Nice",
    description: "Balade en paddle sur la promenade des Anglais.",
    mealIncluded: false,
    duration: 1.5,
    primaryCategory: "apr√®s-midi",
    secondaryCategory: "sportif",
    budget: 25
  },
  {
    id: atelier_art_verre_menton,
    title: "Atelier d'art du verre √† Menton",
    phone: "+33 4 93 57 05 60",
    reservationLink: "https://www.sabrer.glass",
    address: "3 Rue Saint-Michel, 06500 Menton",
    description: "Soufflage de verre et cr√©ation de petits objets.",
    mealIncluded: false,
    duration: 2,
    primaryCategory: "matin",
    secondaryCategory: "insolite",
    budget: 50
  },
  {
    id: visite_site_archaeologique_massalia,
    title: "Visite du site arch√©ologique d'Ariane",
    phone: "+33 4 93 32 50 20",
    reservationLink: "https://www.nice-archao06.fr",
    address: "Rue du Coll√®ge Victor Duruy, 06100 Nice",
    description: "Vestiges romains et visite comment√©e par un arch√©ologue.",
    mealIncluded: false,
    duration: 1.5,
    primaryCategory: "matin",
    secondaryCategory: "insolite",
    budget: 5
  },
  {
    id: decouverte_oenologique_villetallier,
    title: "D√©couverte ≈ìnologique au Domaine de Villetallier",
    phone: "+33 4 93 05 67 89",
    reservationLink: "https://www.villetallier-vins.com",
    address: "Chemin de Villetallier, 06370 Peille",
    description: "Initiation aux c√©pages locaux avec accords mets-vins.",
    mealIncluded: true,
    duration: 3,
    primaryCategory: "midi",
    secondaryCategory: "gastronomique",
    budget: 55
  },
  {
    id: marche_nocturne_vieux_nice,
    title: "Marche nocturne dans le Vieux Nice",
    phone: "+33 6 98 76 12 34",
    reservationLink: "",
    address: "Vieux Nice, 06300 Nice",
    description: "Promenade sous les lumi√®res, ambiance magique.",
    mealIncluded: false,
    duration: 1,
    primaryCategory: "soir",
    secondaryCategory: "romantique",
    budget: 0
  },
  {
    id: yoga_plein_air_jardin_albert,
    title: "S√©ance de yoga en plein air",
    phone: "+33 6 87 65 43 21",
    reservationLink: "https://www.yoga-nice.fr",
    address: "Jardin Albert Ier, 06000 Nice",
    description: "Cours de yoga matinal face √† la mer.",
    mealIncluded: false,
    duration: 1,
    primaryCategory: "matin",
    secondaryCategory: "chill",
    budget: 10
  },
  {
    id: atelier_ceramique_contes,
    title: "Atelier c√©ramique √† Contes",
    phone: "+33 4 93 05 36 01",
    reservationLink: "https://www.argilaria.fr",
    address: "Rue de l'√âglise, 06390 Contes",
    description: "Modelage et √©maillage avec un potier local.",
    mealIncluded: false,
    duration: 2,
    primaryCategory: "apr√®s-midi",
    secondaryCategory: "insolite",
    budget: 30
  },
  {
    id: balade_photo_garibaldi,
    title: "Balade photo place Garibaldi",
    phone: "+33 6 54 32 10 98",
    reservationLink: "https://www.photo-nice.com",
    address: "Place Garibaldi, 06300 Nice",
    description: "Itin√©raire photo accompagn√© par un photographe pro.",
    mealIncluded: false,
    duration: 2,
    primaryCategory: "apr√®s-midi",
    secondaryCategory: "insolite",
    budget: 35
  },
  {
    id: excursion_calanque_molenes,
    title: "Excursion en bateau vers les Calanques",
    phone: "+33 4 92 07 28 28",
    reservationLink: "https://www.calanques-nice.com",
    address: "Port de Nice, Quai Lunel",
    description: "D√©couverte des calanques et snorkeling.",
    mealIncluded: false,
    duration: 3,
    primaryCategory: "apr√®s-midi",
    secondaryCategory: "sportif",
    budget: 60
  },
  {
    id: trekking_acropolis_menton,
    title: "Trekking sur le Mont Agel",
    phone: "+33 4 93 06 73 00",
    reservationLink: "https://www.alpes-maritimes-tourisme.com",
    address: "Col de Nice, 06300 Nice",
    description: "Randonn√©e vers la T√™te de Chien avec vue sur Monaco.",
    mealIncluded: false,
    duration: 4,
    primaryCategory: "matin",
    secondaryCategory: "sportif",
    budget: 0
  },
  {
    id: atelier_patisserie_sainte_helene,
    title: "Atelier p√¢tisserie √† Sainte-H√©l√®ne",
    phone: "+33 4 93 90 12 34",
    reservationLink: "https://www.douceurs-helene.fr",
    address: "Place de la Mairie, 06390 Contes",
    description: "Confection de p√¢tisseries traditionnelles ni√ßoises.",
    mealIncluded: true,
    duration: 2,
    primaryCategory: "apr√®s-midi",
    secondaryCategory: "gastronomique",
    budget: 40
  },
  {
    id: visite_jardin_exotique,
    title: "Visite du Jardin Exotique de Monaco",
    phone: "+377 93 15 29 02",
    reservationLink: "https://www.jardinexotique.mc",
    address: "Boulevard du Jardin Exotique, 98000 Monaco",
    description: "Collection de plantes succulentes et par fort panoramique.",
    mealIncluded: false,
    duration: 1.5,
    primaryCategory: "matin",
    secondaryCategory: "chill",
    budget: 7
  },
  {
    id: croisiere_bateau_electrique,
    title: "Croisi√®re en bateau √©lectrique",
    phone: "+33 4 93 50 54 87",
    reservationLink: "https://www.electricboats-nice.com",
    address: "Port Lympia, 06300 Nice",
    description: "Balade silencieuse et √©cologique dans la baie.",
    mealIncluded: false,
    duration: 1.5,
    primaryCategory: "apr√®s-midi",
    secondaryCategory: "chill",
    budget: 30
  },
  {
    id: cours_meditation_reclus,
    title: "Cours de m√©ditation au Monast√®re de Cimiez",
    phone: "+33 4 93 17 30 30",
    reservationLink: "https://www.monastere-cimiez.fr",
    address: "Place Suzanne Buisson, 06000 Nice",
    description: "S√©ance de m√©ditation dans le clo√Ætre paisible.",
    mealIncluded: false,
    duration: 1,
    primaryCategory: "matin",
    secondaryCategory: "chill",
    budget: 0
  },
  {
    id: visite_phare_garoupe,
    title: "Visite du Phare de la Garoupe",
    phone: "+33 4 93 76 00 00",
    reservationLink: "https://www.capferrat-tourisme.com",
    address: "Cap d'Antibes, 06160 Antibes",
    description: "Montez au sommet pour un panorama sur la mer.",
    mealIncluded: false,
    duration: 1,
    primaryCategory: "apr√®s-midi",
    secondaryCategory: "chill",
    budget: 5
  },
  {
    id: tour_v√©lo_promenade_massena,
    title: "Tour v√©lo sous-location",
    phone: "+33 6 12 34 56 78",
    reservationLink: "https://www.velonice.fr",
    address: "Place Mass√©na, 06000 Nice",
    description: "Location de v√©los pour longer la Promenade.",
    mealIncluded: false,
    duration: 2,
    primaryCategory: "apr√®s-midi",
    secondaryCategory: "sportif",
    budget: 15
  },
  {
    id: atelier_fabrication_mascareignes,
    title: "Atelier fabrication de savon ni√ßois",
    phone: "+33 4 93 85 12 34",
    reservationLink: "https://www.savonnerie-nice.com",
    address: "18 Rue Gubernatis, 06000 Nice",
    description: "Fabriquez votre savon parfum√© √† la fleur d'oranger.",
    mealIncluded: false,
    duration: 1.5,
    primaryCategory: "apr√®s-midi",
    secondaryCategory: "insolite",
    budget: 20
  },
  {
    id: balade_cani_rando,
    title: "Cani-rando dans l'arri√®re-pays",
    phone: "+33 6 77 88 99 00",
    reservationLink: "https://www.canirando-nice.com",
    address: "D√©part: Levens, 06670 Levens",
    description: "Randonn√©e tir√© par des chiens nordiques.",
    mealIncluded: false,
    duration: 2.5,
    primaryCategory: "apr√®s-midi",
    secondaryCategory: "sportif",
    budget: 50
  },
  {
    id: decouverte_apiculteur_local,
    title: "D√©couverte d'une ruche et d√©gustation de miel",
    phone: "+33 4 93 80 77 88",
    reservationLink: "https://www.abeille-nice.fr",
    address: "Route de Bellet, 06200 Nice",
    description: "Visite guid√©e d'un apiculteur et d√©gustation de miels vari√©s.",
    mealIncluded: false,
    duration: 1.5,
    primaryCategory: "matin",
    secondaryCategory: "gastronomique",
    budget: 10
  },
  {
    id: "croisiere_coucher_soleil",
    title: "Croisi√®re coucher de soleil",
    phone: "+33 4 93 85 18 82",
    reservationLink: "https://getyourguide.com/boat-tour-nice",
    address: "Port Lympia, Quai Papacino, 06300 Nice",
    description: "Navigation en fin de journ√©e avec ap√©ritif √† bord.",
    mealIncluded: true,
    duration: 2,
    primaryCategory: "soir",
    secondaryCategory: "romantique",
    budget: 50
  },
  {
    id: "excursion_parc_naturel_mercantour",
    title: "Excursion Parc National du Mercantour",
    phone: "+33 4 93 02 65 20",
    reservationLink: "https://www.parc-du-mercantour.fr",
    address: "Lac d'Allos, 04400 Allos",
    description: "Randonn√©e guid√©e dans un des plus beaux parcs des Alpes-Maritimes.",
    mealIncluded: false,
    duration: 5,
    primaryCategory: "matin",
    secondaryCategory: "sportif",
    budget: 0
  },
  {
    id: "visite_musee_cocteau_menton",
    title: "Visite du Mus√©e Cocteau √† Menton",
    phone: "+33 4 92 41 06 06",
    reservationLink: "https://www.museecocteau.fr",
    address: "2 Quai de Monl√©on, 06500 Menton",
    description: "≈íuvres de Jean Cocteau dans un magnifique b√¢timent contemporain.",
    mealIncluded: false,
    duration: 1.5,
    primaryCategory: "matin",
    secondaryCategory: "chill",
    budget: 8
  },
  {
    id: "kayak_cannes",
    title: "Kayak √† Cannes",
    phone: "+33 7 85 54 32 10",
    reservationLink: "https://www.cayaks-de-cannes.fr",
    address: "Plage du Midi, 06400 Cannes",
    description: "Balade en kayak le long de la Croisette.",
    mealIncluded: false,
    duration: 2,
    primaryCategory: "apr√®s-midi",
    secondaryCategory: "sportif",
    budget: 30
  },
  {
    id: "visite_villa_etrusque",
    title: "Visite de la Villa Ephrussi de Rothschild",
    phone: "+33 4 93 01 55 01",
    reservationLink: "https://www.villa-ephrussi.com",
    address: "1 Avenue Ephrussi de Rothschild, 06320 Saint-Jean-Cap-Ferrat",
    description: "Palais rose et somptueux jardins surplombant la mer.",
    mealIncluded: false,
    duration: 2,
    primaryCategory: "matin",
    secondaryCategory: "chill",
    budget: 14
  },
  {
    id: "atelier_peche_ni√ßoise",
    title: "Atelier p√™che traditionnelle ni√ßoise",
    phone: "+33 6 13 14 15 16",
    reservationLink: "https://www.visorando.com",
    address: "Port Lympia, 06300 Nice",
    description: "Initiez-vous √† la p√™che locale avec un p√™cheur professionnel.",
    mealIncluded: false,
    duration: 3,
    primaryCategory: "matin",
    secondaryCategory: "insolite",
    budget: 0
  },
  {
    id: "diner_gastronomique_michelin",
    title: "D√Æner gastronomique √©toil√© Michelin",
    phone: "+33 4 93 16 64 00",
    reservationLink: "https://www.hotel-negresco-nice.com/fr/restaurants-bar/le-chantecler",
    address: "37 Promenade des Anglais, 06000 Nice",
    description: "Une √©toile Michelin dans un cadre d‚Äôexception.",
    mealIncluded: true,
    duration: 3,
    primaryCategory: "soir",
    secondaryCategory: "gastronomique",
    budget: 150
  },
  {
    id: "visite_chateau_grimaldi",
    title: "Visite du Ch√¢teau Grimaldi",
    phone: "+33 4 93 41 21 07",
    reservationLink: "https://www.musee-chateau-grimaldi.fr",
    address: "1 Place du Ch√¢teau, 06300 Antibes",
    description: "Ch√¢teau m√©di√©val transform√© en mus√©e d'art moderne.",
    mealIncluded: false,
    duration: 1.5,
    primaryCategory: "matin",
    secondaryCategory: "chill",
    budget: 6
  },
  {
    id: "surf_antibes",
    title: "Cours de surf √† Antibes",
    phone: "+33 6 12 34 56 78",
    reservationLink: "https://www.antibessurfschool.com",
    address: "Plage de la Gravette, 06600 Antibes",
    description: "Initiation au surf pour tous niveaux.",
    mealIncluded: false,
    duration: 2,
    primaryCategory: "apr√®s-midi",
    secondaryCategory: "sportif",
    budget: 45
  },
  {
    id: "visite_gardens_albert_1er",
    title: "Promenade au Jardin Albert 1er",
    phone: "+33 4 93 13 49 99",
    reservationLink: "",
    address: "Place Mass√©na, 06000 Nice",
    description: "Parc urbain ombrag√© entre la Promenade et la ville.",
    mealIncluded: false,
    duration: 1,
    primaryCategory: "matin",
    secondaryCategory: "chill",
    budget: 0
  },
  {
    id: "cours_photographie_nice",
    title: "Atelier photographie urbaine",
    phone: "+33 6 98 76 54 32",
    reservationLink: "https://www.photo-nice.com",
    address: "Place Garibaldi, 06300 Nice",
    description: "Apprenez √† capturer la lumi√®re de Nice avec un photographe pro.",
    mealIncluded: false,
    duration: 2,
    primaryCategory: "apr√®s-midi",
    secondaryCategory: "insolite",
    budget: 40
  },
  {
    id: "visite_cathedrale_orthodoxe",
    title: "Visite de la Cath√©drale Orthodoxe Russe Saint-Nicolas",
    phone: "+33 4 93 13 04 49",
    reservationLink: "",
    address: "49 Avenue Georges Clemenceau, 06000 Nice",
    description: "Int√©rieur somptueux et mosa√Øques orthodoxes typiques.",
    mealIncluded: false,
    duration: 1,
    primaryCategory: "matin",
    secondaryCategory: "chill",
    budget: 0
  },
  {
    id: "degustation_glaces_berthillon",
    title: "D√©gustation de glaces Berthillon",
    phone: "+33 1 43 54 31 60",
    reservationLink: "https://www.berthillon.fr",
    address: "√éle Saint-Louis, Paris", // Note : faux car Berthillon est √† Paris, replace with local glacier
    description: "Go√ªtez des glaces artisanales aux parfums m√©diterran√©ens.",  
    mealIncluded: false,
    duration: 0.5,
    primaryCategory: "apr√®s-midi",
    secondaryCategory: "gastronomique",
    budget: 5
  },
  {
    id: "atelier_mixologie_nice",
    title: "Atelier mixologie",
    phone: "+33 4 93 80 45 67",
    reservationLink: "https://www.cocktailworkshop.fr",
    address: "5 Rue Bonaparte, 06300 Nice",
    description: "Cr√©ez et d√©gustez vos propres cocktails avec un bartender pro.",
    mealIncluded: false,
    duration: 1.5,
    primaryCategory: "soir",
    secondaryCategory: "insolite",
    budget: 30
  },
  {
    id: "visite_fort_du_baron",
    title: "Visite du Fort du Baron",
    phone": "+33 4 92 47 73 93",
    reservationLink: "https://www.menton-riviere-tourisme.com",
    address: "Menton, 06500",
    description: "Explorer les ruines et profiter d'une vue plongeante sur Menton.",
    mealIncluded: false,
    duration: 1.5,
    primaryCategory: "matin",
    secondaryCategory: "insolite",
    budget: 0
  },
   {
      id: "rando_esterel",
      title: "Randonn√©e Est√©rel avec vue mer",
      phone: "",
      reservationLink: "https://visorando.com/randonnee-esterel",
      address: "Massif de l'Est√©rel, 83400 Fr√©jus",
      description: "Explorez les roches rouges de l'Est√©rel et profitez d'un panorama √† couper le souffle sur la M√©diterran√©e.",
      mealIncluded: false,
      duration: 3,
      primaryCategory: "matin",
      secondaryCategory: "sportif",
      budget: 0
    },
    {
      id: "marche_castel",
      title: "March√© du Ch√¢teau et street food ni√ßoise",
      phone: "",
      reservationLink: "https://goo.gl/maps/castel-food",
      address: "Place du Ch√¢teau, 06300 Nice",
      description: "Parcourez les √©tals color√©s du march√© et d√©gustez socca, pissaladi√®re et autres sp√©cialit√©s locales.",
      mealIncluded: true,
      duration: 1,
      primaryCategory: "midi",
      secondaryCategory: "gastronomique",
      budget: 20
    },
    {
      id: "musee_chagall",
      title: "Mus√©e Marc Chagall",
      phone: "+33 4 97 18 53 77",
      reservationLink: "https://musees-nice.org/chagall",
      address: "Avenue Dr M√©nard, 06000 Nice",
      description: "Plongez dans l‚Äô≈ìuvre biblique et color√©e de Chagall, chef‚Äëde‚Äëfile de l‚Äôart moderne.",
      mealIncluded: false,
      duration: 1.5,
      primaryCategory: "matin",
      secondaryCategory: "chill",
      budget: 12
    },
    {
      id: "canoe_parc_naturel_mercantour",
      title: "Cano√´ dans le Parc du Mercantour",
      phone: "+33 6 07 03 09 39",
      reservationLink: "https://funbooker.com/canoe-mercantour",
      address: "Lac de Saint-Cassien, 83540 Mons",
      description: "Descendez les eaux turquoise du lac et ses criques sauvages en cano√´.",
      mealIncluded: false,
      duration: 3,
      primaryCategory: "apr√®s-midi",
      secondaryCategory: "sportif",
      budget: 25
    },
    {
      id: "croisiere_soleil",
      title: "Croisi√®re au coucher du soleil",
      phone: "+33 4 93 85 18 82",
      reservationLink: "https://getyourguide.com/solar-boat-nice",
      address: "Port Lympia, Quai Papacino, 06300 Nice",
      description: "Naviguez √† bord d‚Äôun bateau solaire et admirez le coucher de soleil sur la Baie des Anges.",
      mealIncluded: false,
      duration: 2,
      primaryCategory: "soir",
      secondaryCategory: "romantique",
      budget: 40
    },
    {
      id: "spectacle_soir",
      title  "Spectacle au th√©√¢tre",
      phone  "+33 4 93 82 50 50",
      reservationLink: "https://theatrenice.fr",
      address: "2 Avenue Saint-Jean-Baptiste, 06000 Nice",
      description: "Profitez d‚Äôune soir√©e culturelle avec un spectacle de th√©√¢tre local.",
      mealIncluded: false,
      duration: 2,
      primaryCategory: "soir",
      secondaryCategory: "chill",
      budget: 25
    },
    {
    id: "atelier_cuisine_nicoise",
    title: "Atelier de cuisine ni√ßoise",
    phone: "+33 4 93 16 82 40",
    reservationLink: "https://www.latelierpastry.com",
    address: "4 Rue Barillerie, 06300 Nice",
    description: "Apprenez √† pr√©parer socca, pissaladi√®re et tourte de blettes avec un chef local.",
    mealIncluded: true,
    duration: 2,
    primaryCategory: "midi",
    secondaryCategory: "gastronomique",
    budget: 35
  },
  {
    id: "visite_musee_matisse",
    title: "Visite du Mus√©e Matisse",
    phone: "+33 4 93 81 08 08",
    reservationLink: "https://www.musee-matisse-nice.org",
    address: "164 Avenue des Ar√®nes de Cimiez, 06000 Nice",
    description: "D√©couvrez l'≈ìuvre compl√®te de Henri Matisse dans une villa historique.",
    mealIncluded: false,
    duration: 2,
    primaryCategory: "matin",
    secondaryCategory: "chill",
    budget: 10
  },
  {
    id: "balade_promenade_anglais",
    title: "Balade sur la Promenade des Anglais",
    phone: "+33 4 93 13 23 00",
    reservationLink: "https://www.nicetourisme.com",
    address: "Promenade des Anglais, 06000 Nice",
    description: "Promenez-vous sur le bord de mer embl√©matique de Nice.",
    mealIncluded: false,
    duration: 1,
    primaryCategory: "apr√®s-midi",
    secondaryCategory: "chill",
    budget: 0
  },
  {
    id: "visite_colline_chateau",
    title: "Visite de la Colline du Ch√¢teau",
    phone: "+33 4 93 92 82 82",
    reservationLink: "https://www.nicetourisme.com",
    address: "Colline du Ch√¢teau, 06300 Nice",
    description: "Montez au sommet pour un panorama √† 360¬∞ sur Nice et la baie.",
    mealIncluded: false,
    duration: 1.5,
    primaryCategory: "matin",
    secondaryCategory: "sportif",
    budget: 0
  },
  {
    id: "marche_cours_saleya",
    title: "Visite du March√© Cours Saleya",
    phone: "",
    reservationLink: "https://www.niceandbeyond.com",
    address: "Cours Saleya, Vieux Nice, 06300 Nice",
    description: "Fl√¢nez parmi les √©tals de fleurs, fruits et sp√©cialit√©s ni√ßoises.",
    mealIncluded: false,
    duration: 1,
    primaryCategory: "matin",
    secondaryCategory: "insolite",
    budget: 15
  },
  {
    id: "visite_parc_phoenix",
    title: "Visite du Parc Phoenix",
    phone: "+33 4 93 45 84 00",
    reservationLink: "https://niceparcphoenix.com",
    address: "Avenue des Diables Bleus, 06200 Nice",
    description: "D√©couvrez plus de 2 000 esp√®ces de plantes et un grand zoo pour enfants.",
    mealIncluded: false,
    duration: 1.5,
    primaryCategory: "apr√®s-midi",
    secondaryCategory: "chill",
    budget: 5
  },
  {
    id: "visite_musee_massena",
    title: "Mus√©e Mass√©na",
    phone: "+33 4 93 13 40 40",
    reservationLink: "https://musee-massena.nicetourisme.com",
    address: "65 Promenade des Anglais, 06000 Nice",
    description: "Mus√©e historique d√©di√© √† la Belle √âpoque ni√ßoise.",
    mealIncluded: false,
    duration: 1.5,
    primaryCategory: "matin",
    secondaryCategory: "chill",
    budget: 9
  },
  {
    id: "visite_opera_nice",
    title: "Visite de l'Op√©ra de Nice",
    phone: "+33 4 93 62 06 06",
    reservationLink: "https://www.opera-nice.org",
    address: "Place Mass√©na, 06000 Nice",
    description: "D√©couvrez l‚Äôarchitecture et assistez √† une repr√©sentation.",
    mealIncluded: false,
    duration: 2,
    primaryCategory: "soir",
    secondaryCategory: "romantique",
    budget: 30
  },
  {
    id: "cours_cocktail_old_nice",
    title: "Atelier cocktails dans le Vieux Nice",
    phone: "+33 4 93 92 27 65",
    reservationLink: "https://www.nicecocktails.com",
    address: "2 Rue Droite, 06300 Nice",
    description: "Apprenez √† cr√©er des cocktails locaux dans un bar historique.",
    mealIncluded: false,
    duration: 1.5,
    primaryCategory: "soir",
    secondaryCategory: "insolite",
    budget: 25
  },
  {
    id: "kayak_baie_nice",
    title: "Kayak dans la baie de Nice",
    phone: "+33 6 98 22 44 55",
    reservationLink: "https://www.kayaknice.com",
    address: "Port Lympia, 06300 Nice",
    description: "Explorez la c√¥te en kayak, parfait pour les amateurs de sports nautiques.",
    mealIncluded: false,
    duration: 2,
    primaryCategory: "apr√®s-midi",
    secondaryCategory: "sportif",
    budget: 30
  },
  {
    id: "marche_liberation",
    title: "D√©couverte du March√© de la Lib√©ration",
    phone: "+33 4 92 14 46 14",
    reservationLink: "https://www.nicetourisme.com",
    address: "Place du G√©n√©ral de Gaulle, 06100 Nice",
    description: "Un march√© local anim√© avec produits frais et ambiances vari√©es.",
    mealIncluded: false,
    duration: 1.5,
    primaryCategory: "matin",
    secondaryCategory: "gastronomique",
    budget: 0
  },
  {
    id: "escape_game_nice",
    title: "Escape game immersif",
    phone: "+33 4 93 85 42 60",
    reservationLink: "https://www.escapegame-nice.com",
    address: "15 Rue Defly, 06300 Nice",
    description: "Vivez une aventure en √©quipe pour r√©soudre des √©nigmes.",
    mealIncluded: false,
    duration: 1.5,
    primaryCategory: "apr√®s-midi",
    secondaryCategory: "insolite",
    budget: 25
  },
  {
    id: "visite_aquarium_monaco",
    title: "Aquarium de Monaco (Oceanographic Museum)",
    phone: "+377 93 15 36 00",
    reservationLink: "https://www.oceano.mc",
    address: "Avenue Saint-Martin, 98000 Monaco",
    description: "D√©couvrez la faune marine m√©diterran√©enne et tropicale.",
    mealIncluded: false,
    duration: 2,
    primaryCategory: "apr√®s-midi",
    secondaryCategory: "chill",
    budget: 17
  },
  {
    id: "plongee_antibes",
    title: "Plong√©e sous-marine √† Antibes",
    phone: "+33 4 93 34 23 45",
    reservationLink: "https://www.antibesplongee.com",
    address: "Port Vauban, 06600 Antibes",
    description: "Sortie plong√©e pour explorer √©paves et fonds marins.",
    mealIncluded: false,
    duration: 3,
    primaryCategory: "apr√®s-midi",
    secondaryCategory: "sportif",
    budget: 65
  },
  {
    id: "visite_chateau_cremat",
    title: "Visite du Ch√¢teau de Cr√©mat",
    phone: "+33 4 93 37 82 52",
    reservationLink: "https://www.vinsdebellet.com",
    address: "442 Chemin de Cr√©mat, 06200 Nice",
    description: "Domaines viticoles avec d√©gustation de vins de Bellet.",
    mealIncluded: false,
    duration: 1.5,
    primaryCategory: "matin",
    secondaryCategory: "gastronomique",
    budget: 20
  },
  {
    id: "cours_peinture_nice",
    title: "Atelier peinture en plein air",
    phone: "+33 6 01 23 45 67",
    reservationLink: "https://www.artnice.fr",
    address: "Jardin Albert Ier, 06000 Nice",
    description: "Peignez la baie des Anges avec un artiste local.",
    mealIncluded: false,
    duration: 2,
    primaryCategory: "matin",
    secondaryCategory: "insolite",
    budget: 30
  }

    
  ];
     
  const form = document.getElementById('formFiltres');
  const timeline = document.getElementById('timeline');
  const resultats = document.getElementById('resultats');

  // Timeline hours setup (unchanged)
  function creerTimeline(heureDebut, heureFin) {
    timeline.innerHTML = "";
    const heuresCount = heureFin - heureDebut;
    for (let i = 0; i < heuresCount; i++) {
      const heureBloc = document.createElement('div');
      heureBloc.className = 'hour-block';
      heureBloc.style.flex = '1';
      heureBloc.style.position = 'absolute';
      heureBloc.style.left = `${(i * (900 / heuresCount))}px`;
      heureBloc.style.top = '80px';
      heureBloc.style.width = `${900 / heuresCount}px`;
      heureBloc.style.textAlign = 'center';
      heureBloc.style.fontSize = '10px';
      heureBloc.textContent = `${(heureDebut + i).toString().padStart(2, '0')}h`;
      timeline.appendChild(heureBloc);
    }
  }

  const categorieHorairePlages = {
    matin: { debut: 8, fin: 12 },
    midi: { debut: 12, fin: 14 },
    "apr√®s-midi": { debut: 14, fin: 18 },
    soir: { debut: 18, fin: 22 }
  };

  // Fonction filtre (inchang√©e)
  function filtrerActivites(ambiance, repasObligatoire, budgetMax) {
    return activites.filter(act => {
      if (ambiance && act.secondaryCategory !== ambiance) return false;
      if (repasObligatoire === "oui" && !act.mealIncluded) return false;
      if (act.budget > budgetMax) return false;
      return true;
    });
  }

  // Variables globales pour drag & resize
  let dragData = null; // { element, startX, origLeft, timelineLeft, pxParHeure }
  let resizeData = null; // { element, startX, origWidth, timelineLeft, pxParHeure }

  // Fonction pour rendre les activit√©s drag & resize
  function rendreDragResize(element, pxParHeure, heureDebutGlobal, heureFinGlobal) {
    element.style.position = 'absolute';
    element.style.top = '20px';
    element.style.cursor = 'move';
    element.style.userSelect = 'none';

    // Ajouter poign√©e de resize √† droite
    const resizeHandle = document.createElement('div');
    resizeHandle.style.position = 'absolute';
    resizeHandle.style.right = '0';
    resizeHandle.style.top = '0';
    resizeHandle.style.width = '6px';
    resizeHandle.style.height = '100%';
    resizeHandle.style.cursor = 'ew-resize';
    resizeHandle.style.background = 'rgba(0,0,0,0.1)';
    element.appendChild(resizeHandle);

    // Drag start
    element.addEventListener('mousedown', e => {
      if (e.target === resizeHandle) return; // resize handled separately
      e.preventDefault();
      dragData = {
        element: element,
        startX: e.clientX,
        origLeft: parseFloat(element.style.left),
        timelineLeft: timeline.getBoundingClientRect().left,
        pxParHeure: pxParHeure,
        heureDebutGlobal,
        heureFinGlobal
      };
      window.addEventListener('mousemove', dragMove);
      window.addEventListener('mouseup', dragEnd);
    });

    // Resize start
    resizeHandle.addEventListener('mousedown', e => {
      e.preventDefault();
      e.stopPropagation();
      resizeData = {
        element: element,
        startX: e.clientX,
        origWidth: parseFloat(element.style.width),
        timelineLeft: timeline.getBoundingClientRect().left,
        pxParHeure: pxParHeure,
        heureDebutGlobal,
        heureFinGlobal
      };
      window.addEventListener('mousemove', resizeMove);
      window.addEventListener('mouseup', resizeEnd);
    });
  }

  // Drag move
  function dragMove(e) {
    if (!dragData) return;
    e.preventDefault();

    let deltaX = e.clientX - dragData.startX;
    let newLeft = dragData.origLeft + deltaX;

    // Clamp dans timeline
    if (newLeft < 0) newLeft = 0;
    const maxLeft = (dragData.heureFinGlobal - dragData.heureDebutGlobal) * dragData.pxParHeure - dragData.element.offsetWidth;
    if (newLeft > maxLeft) newLeft = maxLeft;

    dragData.element.style.left = newLeft + 'px';
  }

  function dragEnd(e) {
    if (!dragData) return;
    e.preventDefault();
    window.removeEventListener('mousemove', dragMove);
    window.removeEventListener('mouseup', dragEnd);
    dragData = null;
  }

  // Resize move
  function resizeMove(e) {
    if (!resizeData) return;
    e.preventDefault();

    let deltaX = e.clientX - resizeData.startX;
    let newWidth = resizeData.origWidth + deltaX;

    // Minimum width: 0.25h (px)
    const minWidth = resizeData.pxParHeure * 0.25;
    if (newWidth < minWidth) newWidth = minWidth;

    // Max width = jusqu'√† la fin timeline
    const maxWidth = (resizeData.heureFinGlobal - resizeData.heureDebutGlobal) * resizeData.pxParHeure - parseFloat(resizeData.element.style.left);
    if (newWidth > maxWidth) newWidth = maxWidth;

    resizeData.element.style.width = newWidth + 'px';
  }

  function resizeEnd(e) {
    if (!resizeData) return;
    e.preventDefault();
    window.removeEventListener('mousemove', resizeMove);
    window.removeEventListener('mouseup', resizeEnd);
    resizeData = null;
  }

  // Afficher activit√©s dans timeline avec drag & resize
  function afficherActivitesSurTimeline(activitesFiltrees, heureDebutGlobal, heureFinGlobal) {
    creerTimeline(heureDebutGlobal, heureFinGlobal);

    const timelineWidth = timeline.clientWidth || 900;
    const totalHeures = heureFinGlobal - heureDebutGlobal;
    const pxParHeure = timelineWidth / totalHeures;

    // Supprimer anciennes activit√©s
    timeline.querySelectorAll('.activity').forEach(el => el.remove());

    // Cr√©er activit√©s
    activitesFiltrees.forEach(act => {
      const plage = categorieHorairePlages[act.primaryCategory];
      if (!plage) return;

      let debut = Math.max(plage.debut, heureDebutGlobal);
      let fin = Math.min(plage.fin, heureFinGlobal);

      let duree = act.duration;
      if (debut + duree > fin) {
        duree = fin - debut;
      }
      if (duree <= 0) return;

      const leftPx = (debut - heureDebutGlobal) * pxParHeure;
      const widthPx = duree * pxParHeure - 4;
const actDiv = document.createElement('div');
actDiv.className = 'activity' + (act.mealIncluded ? ' mealIncluded' : '');

// Style for a modern, chic look
actDiv.style.position = 'absolute';
actDiv.style.top = '20px';
actDiv.style.left = `${leftPx}px`;
actDiv.style.width = `${widthPx}px`;
actDiv.style.height = '50px';
actDiv.style.background = 'linear-gradient(90deg, #b30808, #ff7a7a)';
actDiv.style.border = 'none';
actDiv.style.borderRadius = '12px';
actDiv.style.padding = '6px 12px';
actDiv.style.boxSizing = 'border-box';
actDiv.style.cursor = 'move';
actDiv.style.userSelect = 'none';
actDiv.style.color = '#fff';
actDiv.style.fontWeight = '600';
actDiv.style.fontSize = '14px';
actDiv.style.fontFamily = '"Segoe UI", Tahoma, Geneva, Verdana, sans-serif';
actDiv.style.boxShadow = '0 4px 10px rgba(0, 0, 0, 0.15)';
actDiv.style.display = 'flex';
actDiv.style.alignItems = 'center';
actDiv.style.justifyContent = 'center';

// Tooltip
actDiv.title = `${act.title}\n${act.description}\nBudget: ‚Ç¨${act.budget}\nDur√©e: ${act.duration}h`;

// Text Content
actDiv.textContent = act.title;

timeline.appendChild(actDiv);

rendreDragResize(actDiv, pxParHeure, heureDebutGlobal, heureFinGlobal);
    });
  }

  // Validation date : pas dans le pass√©
  function validerDatePasPassee(inputDate) {
    if (!inputDate) return false;
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    const dateChoisie = new Date(inputDate);
    dateChoisie.setHours(0, 0, 0, 0);
    return dateChoisie >= today;
  }

  form.addEventListener('submit', e => {
    e.preventDefault();

    const dateJour = document.getElementById('inputDate').value;
    if (!validerDatePasPassee(dateJour)) {
      alert("La date choisie ne peut pas √™tre dans le pass√©.");
      return;
    }

    const ambiance = document.getElementById('selectAmbiance').value;
    const repasObligatoire = document.getElementById('selectRepas').value;
    const budgetMax = Number(document.getElementById('inputBudget').value);
    const heureDebutGlobal = Number(document.getElementById('inputHeureDebut').value);
    const heureFinGlobal = Number(document.getElementById('inputHeureFin').value);

    if (heureDebutGlobal >= heureFinGlobal) {
      alert("L'heure de d√©but doit √™tre inf√©rieure √† l'heure de fin.");
      return;
    }

    const actsFiltres = filtrerActivites(ambiance, repasObligatoire, budgetMax);

    // V√©rifier que le budget total ne d√©passe pas le budget max
    const totalBudget = actsFiltres.reduce((sum, a) => sum + a.budget, 0);
    if (totalBudget > budgetMax) {
      alert(`Le budget total des activit√©s (${totalBudget}‚Ç¨) d√©passe le budget max demand√© (${budgetMax}‚Ç¨).`);
      return;
    }

    afficherActivitesSurTimeline(actsFiltres, heureDebutGlobal, heureFinGlobal);

    resultats.innerHTML = `
      <h2>Activit√©s filtr√©es (${actsFiltres.length})</h2>
      <ul>
        ${actsFiltres.map(a => `<li><strong>${a.title}</strong> ‚Äî Budget: ‚Ç¨${a.budget}, Dur√©e: ${a.duration}h, Repas inclus: ${a.mealIncluded ? "Oui" : "Non"}</li>`).join('')}
      </ul>
      <p><strong>Budget total estim√© : ‚Ç¨${totalBudget}</strong></p>
    `;
  });

  // Initialisation date par d√©faut √† aujourd'hui
  const inputDate = document.getElementById('inputDate');
  const todayISO = new Date().toISOString().split('T')[0];
  inputDate.value = todayISO;

  creerTimeline(8, 20);
   const dateSpan = document.getElementById('date-experience');
  const options = { year: 'numeric', month: 'long', day: 'numeric' };
  const today = new Date();
  dateSpan.textContent = today.toLocaleDateString('fr-FR', options);
   const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    onAuthStateChanged(auth, (user) => {
      const navAuth = document.getElementById("nav-auth");
      const navUser = document.getElementById("nav-user");

      if (user) {
        if (navAuth) navAuth.classList.add("hidden");
        if (navUser) navUser.classList.remove("hidden");
      } else {
        if (navAuth) navAuth.classList.remove("hidden");
        if (navUser) navUser.classList.add("hidden");
      }
    });
</script>

</body>
</html>



