<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mon Compte | OSMOZ ✨</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Poppins:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    :root {
      --bg: #f4f0e5;
      --accent-pink: #e94d66;
      --accent-gold: #c9a227;
      --accent-green: #89c9a4;
      --text-dark: #2f2f2f;
      --glass-bg: rgba(255, 255, 255, 0.5);
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Poppins', sans-serif;
      background: var(--bg);
      color: var(--text-dark);
      min-height: 100vh;
    }
    nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 40px;
      background: var(--glass-bg);
      backdrop-filter: blur(12px);
    }
    .logo { font-family: 'Montserrat', sans-serif; font-size: 1.8rem; font-weight: bold; color: var(--accent-pink); }
    nav ul {
      display: flex;
      list-style: none;
      gap: 24px;
    }
    nav ul li a {
      color: var(--text-dark);
      text-decoration: none;
      font-weight: 500;
      font-size: 1rem;
    }
    nav ul li a:hover { color: var(--accent-gold); }
    header {
      font-family: 'Montserrat', sans-serif;
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--accent-pink);
      text-align: center;
      margin: 40px 0 20px;
    }
    .account-container {
      max-width: 1000px;
      margin: auto;
      background: var(--glass-bg);
      backdrop-filter: blur(20px);
      border-radius: 20px;
      padding: 40px;
      display: flex;
      flex-direction: column;
      gap: 30px;
    }
    .user-info span {
      display: block;
      font-size: 1.1rem;
      margin-bottom: 5px;
    }
    .user-actions { margin-top: 10px; }
    .user-actions button {
      background: linear-gradient(135deg, var(--accent-pink), var(--accent-gold));
      border: none;
      color: white;
      padding: 10px 20px;
      margin-right: 10px;
      border-radius: 30px;
      font-weight: bold;
      cursor: pointer;
    }
    .card {
      background: white;
      border-radius: 18px;
      padding: 30px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }
    .card h3 { color: var(--accent-green); margin-bottom: 15px; }
    .stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 20px;
    }
    .stat-box h4 { color: var(--accent-gold); font-size: 1.2rem; }
    .stat-box p { font-size: 2rem; font-weight: bold; }
  </style>
</head>
<body>
  <nav>
    <div class="logo">OSMOZ ✨</div>
    <ul>
      <li><a href="/">Accueil</a></li>
      <li><a href="/activites">Activités</a></li>
      <li><a href="/tarifs">Combien ça coûte ?</a></li>
      <li><a href="/compte">Mon compte</a></li>
    </ul>
  </nav>
  <header>Mon Compte ✨</header>
  <section class="account-container">
    <div class="user-info">
      <span><strong>Nom :</strong> <span id="user-name"></span></span>
      <span><strong>Email :</strong> <span id="user-email"></span></span>
      <div class="user-actions">
        <button onclick="editUser()"><i class="fas fa-pen"></i> Modifier</button>
        <button onclick="logout()"><i class="fas fa-sign-out-alt"></i> Déconnexion</button>
      </div>
    </div>
    <div class="card">
      <h3><i class="fas fa-history"></i> Historique des activités</h3>
      <ul id="activity-history"></ul>
    </div>
    <div class="card">
      <h3><i class="fas fa-sliders-h"></i> Préférences</h3>
      <ul id="user-preferences"></ul>
    </div>
    <div class="card">
      <h3><i class="fas fa-chart-line"></i> Statistiques</h3>
      <div class="stats" id="user-stats"></div>
    </div>
  </section>
  <script>
    const user = JSON.parse(localStorage.getItem('osmozUser'));
    if (!user) {
      window.location.href = "/connexion";
    } else {
      document.getElementById("user-name").textContent = user.name;
      document.getElementById("user-email").textContent = user.email;
      fetch("/api/userData")
        .then(res => res.json())
        .then(data => {
          document.getElementById("activity-history").innerHTML = data.history.map(h => `<li>${h}</li>`).join("");
          document.getElementById("user-preferences").innerHTML = `
            <li>Thème : ${data.preferences.theme}</li>
            <li>Budget : ${data.preferences.budget}</li>
            <li>Lieu favori : ${data.preferences.place}</li>`;
          document.getElementById("user-stats").innerHTML = `
            <div class="stat-box"><h4>Activités</h4><p>${data.stats.activities}</p></div>
            <div class="stat-box"><h4>Temps passé</h4><p>${data.stats.time}</p></div>
            <div class="stat-box"><h4>Économies</h4><p>${data.stats.savings}</p></div>`;
        });
    }
    function logout() {
      localStorage.removeItem("osmozUser");
      window.location.href = "/connexion";
    }
    function editUser() {
      alert("Fonctionnalité à venir ✨");
    }
  </script>
</body>
</html>
